(self["webpackChunkdrawnsell"]=self["webpackChunkdrawnsell"]||[]).push([[946],{648:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var s=t(3396);const o={class:"draw-page"},i={class:"container-wrapper"};function r(e,n,t,r,a,c){const l=(0,s.up)("black-sun"),d=(0,s.up)("intro"),u=(0,s.up)("container"),h=(0,s.up)("statistics");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(l),(0,s._)("div",i,[(0,s.Wm)(d),(0,s.Wm)(u),(0,s.Wm)(h)])])}const a=e=>((0,s.dD)("data-v-c4cc350e"),e=e(),(0,s.Cn)(),e),c={class:"intro container"},l=a((()=>(0,s._)("h1",null,"DRAW",-1))),d=[l];function u(e,n,t,o,i,r){return(0,s.wg)(),(0,s.iD)("div",c,d)}var h={name:"intro",components:{},data(){return{}},computed:{},watch:{},mounted(){},methods:{}},m=t(89);const g=(0,m.Z)(h,[["render",u],["__scopeId","data-v-c4cc350e"]]);var f=g;const v={class:"container"};function p(e,n,t,o,i,r){const a=(0,s.up)("tools"),c=(0,s.up)("field");return(0,s.wg)(),(0,s.iD)("div",v,[(0,s.Wm)(a,{onHandleTools:o.handleTools,onChangePenColor:o.changePenColor,onChangePenSize:o.changePenSize,onChangePenMode:o.changePenMode,onDownloadImg:r.downloadImg,onRegCard:r.regCard,onFullscreen:r.fullscreen},null,8,["onHandleTools","onChangePenColor","onChangePenSize","onChangePenMode","onDownloadImg","onRegCard","onFullscreen"]),(0,s.Wm)(c,{fullscreen:o.isFullscreen,onInterface:r.getChildInterface},null,8,["fullscreen","onInterface"])])}var C=t(4870);const w={class:"tools"},b=["onClick"],x=["src","alt"];function I(e,n,o,i,r,a){return(0,s.wg)(),(0,s.iD)("ul",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.menu,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,onClick:n=>a.handleClick(e)},[e.icon?((0,s.wg)(),(0,s.iD)("img",{key:0,src:t(6075)(`./${e.icon}`),alt:e.name},null,8,x)):(0,s.kq)("",!0)],8,b)))),128))])}const S=[{icon:"reg.svg",name:"Регистрация карточки",funcName:"regCard"},{icon:"download.svg",name:"Скачать изображение",funcName:"downloadImg"},{icon:"fullscreen.svg",name:"На полный экран",funcName:"fullscreen"},{icon:"color.svg",name:"Сменить цвет",funcName:"changeColor",currentColor:{color:"red",name:"Красный"},fill:[{color:"green",name:"Зеленый"},{color:"red",name:"Красный"},{color:"blue",name:"Синий"}]},{icon:"size.svg",name:"Сменить размер",funcName:"changeSize",currentSize:5,fill:[5,10,15]},{icon:"pen.svg",name:"Карандаш",funcName:"modeSetter",arg:"pen",isOn:!1,fill:[!1,!0]},{icon:"erase.svg",name:"Резинка",funcName:"modeSetter",arg:"erase",isOn:!1,fill:[!1,!0]},{icon:"rays.svg",name:"Лучи",funcName:"modeSetter",arg:"rays",isOn:!1,fill:[!1,!0]}];var y={name:"tools",emits:["handle-tools","change-pen-color","change-pen-size","change-pen-mode","download-img","reg-card","fullscreen"],data(){return{tools:[],menu:[]}},mounted(){this.menu=S,this.modeSetter("Карандаш")},methods:{getActionFromMenu(e){return this.menu.findIndex((n=>n.name===e))},cyclone(e,n,t,s){const o=e.fill[n](t);return e[s]=o===e.fill.length-1?e.fill[0]:e.fill[o+1],e[s]},regCard(){this.$emit("reg-card")},downloadImg(){this.$emit("download-img")},fullscreen(){this.$emit("fullscreen")},modeSetter(e){let n=this.menu[this.getActionFromMenu(e)];const t=this.cyclone(n,"indexOf",n.isOn,"isOn");this.$emit("change-pen-mode",{isOn:t,mode:n.arg})},changeColor(e){let n=this.menu[this.getActionFromMenu(e)];const t=this.cyclone(n,"findIndex",(e=>e.color===n.currentColor.color),"currentColor");this.$emit("change-pen-color",t)},changeSize(e){let n=this.menu.find((n=>n.name===e));const t=this.cyclone(n,"indexOf",n.currentSize,"currentSize");this.$emit("change-pen-size",t)},handleClick(e){this[e.funcName](e.name),"modeSetter"===e.funcName&&this.menu.forEach((n=>{n.name!==e.name&&Object.hasOwn(n,"isOn")&&(n.isOn=!1)}))}}};const P=(0,m.Z)(y,[["render",I],["__scopeId","data-v-fd257c0a"]]);var O=P;function z(e,n,t,o,i,r){return(0,s.wg)(),(0,s.iD)("canvas",{id:"draw-field",ref:"field",onMousedown:n[0]||(n[0]=(...e)=>r.setPosition&&r.setPosition(...e)),onMouseenter:n[1]||(n[1]=(...e)=>r.setPosition&&r.setPosition(...e)),onMousemove:n[2]||(n[2]=(...e)=>r.draw&&r.draw(...e))}," Браузер не поддерживает рисовалку ",544)}var D={name:"field",emits:["interface"],props:{fullscreen:{type:Boolean}},components:{},inject:["lineCfg"],data(){return{canvas:null,context:null,offScreenCanvas:null,subContext:null,pos:{x:0,y:0},line:{cap:"round",width:5,color:"red",mode:""}}},watch:{lineCfg:{handler(e){Object.assign(this.line,e.value)},deep:!0},fullscreen(e){!e&&this.rerenderImg()}},mounted(){this.emitInterface(),window.addEventListener("resize",this.rerenderImg),this.canvas=this.$el,this.context=this.canvas.getContext("2d"),this.createOffsetScreenCanvas(),this.rerenderImg()},beforeUnmount(){window.removeEventListener("resize",this.rerenderImg)},methods:{createOffsetScreenCanvas(){this.offScreenCanvas=document.createElement("canvas"),this.offScreenCanvas.width=3e3,this.offScreenCanvas.height=3e3,this.subContext=this.offScreenCanvas.getContext("2d")},setPosition(e){this.pos.x=e.offsetX>=0?e.offsetX:0,this.pos.y=e.offsetY>=0?e.offsetY:0},setLineStyle(){this.subContext.lineWidth=this.line.width,this.subContext.lineCap=this.line.cap,this.subContext.strokeStyle=this.line.color},setLinePath(e){this.subContext.globalCompositeOperation="source-over","erase"===this.line.mode?(this.subContext.globalCompositeOperation="destination-out",this.subContext.arc(this.pos.x,this.pos.y,8,0,2*Math.PI,!1),this.subContext.fill(),this.setPosition(e)):"rays"===this.line.mode?(this.subContext.moveTo(this.pos.x,this.pos.y),this.subContext.lineTo(e.offsetX,e.offsetY)):(this.subContext.moveTo(this.pos.x,this.pos.y),this.setPosition(e),this.subContext.lineTo(this.pos.x,this.pos.y))},draw(e){1===e.buttons&&(this.subContext.beginPath(),this.setLineStyle(),this.setLinePath(e),this.subContext.stroke(),this.rerenderImg())},setCanvasSize(){const{clientWidth:e,clientHeight:n}=document.querySelector("#draw-field").parentNode;this.context.canvas.width=e-5,this.context.canvas.height=this.fullscreen?n-15:n>800?800:n},putImgData(){this.context.drawImage(this.offScreenCanvas,0,0)},rerenderImg(){this.setCanvasSize(),this.putImgData()},downloadImg(){let e=document.createElement("a");e.href=this.canvas.toDataURL("image/png",1),e.download="aboba",document.body.appendChild(e),e.click()},regCard(){},emitInterface(){this.$emit("interface",{downloadImg:()=>this.downloadImg()})}}};const k=(0,m.Z)(D,[["render",z],["__scopeId","data-v-4501b0bc"]]);var _=k,F={name:"container",components:{tools:O,field:_},setup(){let e=(0,C.iH)({}),n=(0,C.iH)(!1);const t=n=>{e.value.mode=n.isOn&&n.mode},o=n=>{e.value.color=n.color},i=n=>{e.value.width=n},r=e=>{e()};return(0,s.JJ)("lineCfg",e),{lineCfg:e,isFullscreen:n,changePenMode:t,changePenColor:o,changePenSize:i,handleTools:r}},mounted(){document.addEventListener("fullscreenchange",this.handleFullscreenChange)},beforeUnmount(){document.removeEventListener("fullscreenchange",this.handleFullscreenChange)},methods:{getChildInterface(e){this.$options.childInterface=e},downloadImg(){this.$options.childInterface.downloadImg()},regCard(){this.$options.childInterface.regCard()},fullscreen(){this.isFullscreen?document.exitFullscreen():this.$el.requestFullscreen()},handleFullscreenChange(){this.isFullscreen=!!document.fullscreenElement}}};const N=(0,m.Z)(F,[["render",p],["__scopeId","data-v-90bf2672"]]);var $=N,M=t(7139);const E={class:"statistics container"},L={class:"container-wrapper"};function T(e,n,t,o,i,r){return(0,s.wg)(),(0,s.iD)("div",E,[(0,s._)("div",L,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(3,(e=>(0,s._)("div",{key:e,class:"card"},(0,M.zw)(e),1))),64))])])}var W={name:"statistics",components:{},data(){return{}},computed:{},watch:{},mounted(){},methods:{}};const H=(0,m.Z)(W,[["render",T],["__scopeId","data-v-fcb6b62e"]]);var Z=H,U={name:"draw-page",components:{intro:f,container:$,statistics:Z},data(){return{}},computed:{},watch:{},mounted(){},methods:{}};const Y=(0,m.Z)(U,[["render",r],["__scopeId","data-v-cc6b90be"]]);var j=Y},6075:function(e,n,t){var s={"./business.svg":2539,"./color.svg":3971,"./download.svg":9007,"./erase.svg":847,"./fullscreen.svg":9380,"./pen.svg":9922,"./rays.svg":9055,"./reg.svg":3928,"./size.svg":6586};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(s,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=i,e.exports=o,o.id=6075},3971:function(e,n,t){"use strict";e.exports=t.p+"img/color.af77cb25.svg"},9007:function(e,n,t){"use strict";e.exports=t.p+"img/download.c69bc8bb.svg"},847:function(e,n,t){"use strict";e.exports=t.p+"img/erase.2e5a0d0d.svg"},9380:function(e,n,t){"use strict";e.exports=t.p+"img/fullscreen.d475caa9.svg"},9055:function(e,n,t){"use strict";e.exports=t.p+"img/rays.ec9bff46.svg"},3928:function(e,n,t){"use strict";e.exports=t.p+"img/reg.e3278de4.svg"},6586:function(e,n,t){"use strict";e.exports=t.p+"img/size.42ad07f8.svg"}}]);
//# sourceMappingURL=drawPage.a26ba200.js.map